import{a,b as l,j as e,R as u,C as d}from"./@react-three/fiber-D-zHcKI6.js";import{P as f,a as h,O as p,S as m,c as x}from"./@react-three/drei-BgfP8Tx0.js";import"./three-Bi4DvGpZ.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function j(){const n=a.useRef(),o=500;l(r=>{n.current.rotation.y=Math.sin(r.clock.elapsedTime*.1)*.1,n.current.position.x=Math.cos(r.clock.elapsedTime*.05)*2});const t=new Float32Array(o*3);for(let r=0;r<o;r++)t[r*3]=(Math.random()-.5)*50,t[r*3+1]=Math.random()*10+15,t[r*3+2]=(Math.random()-.5)*50;return e.jsx(f,{ref:n,positions:t,stride:3,frustumCulled:!1,children:e.jsx(h,{color:"#4a4a4a",size:.5,transparent:!0,opacity:.6})})}function g(){const n=a.useRef();return l(o=>{n.current.position.z+=.1,n.current.position.z>10&&(n.current.position.z=-50)}),e.jsxs("mesh",{ref:n,rotation:[-Math.PI/2,0,0],position:[0,0,0],children:[e.jsx("planeGeometry",{args:[100,200]})," ",e.jsx("meshStandardMaterial",{color:"#333333",roughness:.8,metalness:.2,transparent:!0,opacity:.9})]})}function y(){const[n,o]=a.useState([]);return a.useEffect(()=>{const t=setInterval(()=>{if(n.length<5){const r=Math.random()>.5?1:-1,s=Math.random()>.7?2:1;for(let i=0;i<s;i++)o(c=>[...c,{id:Date.now()+i,posX:(Math.random()-.5)*10,direction:r}])}},5e3+Math.random()*5e3);return()=>clearInterval(t)},[]),e.jsx(e.Fragment,{children:n.map(t=>e.jsx(M,{initialX:t.posX,direction:t.direction,onEnd:()=>o(r=>r.filter(s=>s.id!==t.id))},t.id))})}function M({initialX:n,direction:o,onEnd:t}){const r=a.useRef(),s=2*o;return l(i=>{r.current.position.z+=s,r.current.position.x=n+Math.sin(i.clock.elapsedTime*s)*.5,Math.abs(r.current.position.z)>50&&t()}),e.jsxs("mesh",{ref:r,position:[n,.5,-50*o],children:[e.jsx("boxGeometry",{args:[2,1,4]})," ",e.jsx("meshStandardMaterial",{color:"#666666"})," "]})}function E(){const n=a.useRef([]);l(()=>{n.current.forEach((t,r)=>{t?.current&&(t.current.intensity=1+Math.sin(Date.now()*.001+r)*.5,t.current.decay=.5)})});const o=[];for(let t=0;t<5;t++){const r=(t-2)*20;o.push(e.jsxs("group",{position:[r,5,0],children:[e.jsxs("mesh",{children:[e.jsx("cylinderGeometry",{args:[.1,.1,10]})," ",e.jsx("meshStandardMaterial",{color:"#444"})]}),e.jsx("pointLight",{ref:s=>{n.current[t]=s},position:[0,10,0],color:"#ffffaa",intensity:1,distance:20})]},t))}return o}class C extends u.Component{constructor(o){super(o),this.state={hasError:!1}}static getDerivedStateFromError(o){return{hasError:!0}}componentDidCatch(o,t){console.error("Three.js Error:",o,t)}render(){return this.state.hasError?e.jsx("h1",{style:{color:"white",textAlign:"center"},children:"Cảnh tải lỗi, reload nhé!"}):this.props.children}}function S(){return e.jsx(C,{children:e.jsxs(d,{camera:{position:[0,10,20],fov:60},style:{background:"#000000"},gl:{antialias:!0},children:[e.jsx("ambientLight",{intensity:.1}),e.jsx(p,{enablePan:!1}),e.jsx("fog",{attach:"fog",args:["#000000",10,50]})," ",e.jsx(j,{}),e.jsx(g,{}),e.jsx(y,{}),e.jsx(E,{}),e.jsx(m,{inclination:.6,azimuth:.1})]})})}function b(){return e.jsx(S,{})}x.createRoot(document.getElementById("root")).render(e.jsx(a.StrictMode,{children:e.jsx(b,{})}));
